<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="width=device-width, initial-scale=1" name="viewport"><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="Rundeck Ruby Client Â· Overview" name="description"><title>Overview - Rundeck Ruby Client</title><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link href="stylesheets/bootstrap.min-8154ed26.css" rel="stylesheet" type="text/css" /><link href="stylesheets/all-872e26d3.css" rel="stylesheet" type="text/css" /></head><body><div class="container-fluid"><nav class="navbar-default" role="navigation"><button class="navbar-toggle collapsed" data-target="#sidebar" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="sidebar"><div class="collapse navbar-collapse" id="sidebar"><ul class="nav nav-sidebar"><li class="sidebar-brand"><a href="/">Rundeck Ruby</a></li><li><a href="./">Home</a></li><li class="active"><a href="overview">Overview</a></li><hr class="side-hr"><li><a href="http://rubygems.org/gems/rundeck" target="_blank"><span class="glyphicon glyphicon-globe"></span> RubyGems Page</a></li><li><a href="https://github.com/dblessing/rundeck-ruby" target="_blank"><span class="glyphicon glyphicon-star"></span> GitHub page</a></li><li><a href="https://github.com/dblessing/rundeck-ruby/issues" target="_blank"><span class="glyphicon glyphicon-exclamation-sign"></span> Issue Tracker</a></li><li><a href="http://rubydoc.info/gems/rundeck/frames" target="_blank"><span class="glyphicon glyphicon-book"></span> Technical Documentation (RDoc)</a></li><li><a href="http://rundeck.org" target="_blank"><span class="glyphicon glyphicon-play"></span> Rundeck.org</a></li><div class="gem-badge"><a href="http://badge.fury.io/rb/rundeck"><img height="18" src="https://badge.fury.io/rb/rundeck.svg"></a></div></ul></div></div></nav><div class="main"><a name="top"></a><h1>Overview</h1><h2><a href="#basic-examples">Basic examples</a></h2><p>This page shows a few things that will give you an idea
of how this library works. For a list of all library endpoints
see the <a href="http://rubydoc.info/gems/rundeck/Rundeck/Client" target="_blank">Client class</a> under 'Instance Attribute Summary'</p><p>All examples here will use the class method pattern as opposed to
instantiating a client object. All methods can be accessed similarly
if the client is instantiated.</p><ul><li><strong><a href="#list-projects">List Projects</a></strong></li><li><strong><a href="#create-projects">Create a new project</a></strong></li><li><strong><a href="#list-jobs">List jobs</a></strong></li><li><strong><a href="#list-job">List a specific job</a></strong></li><li><strong><a href="#import-jobs">Create/Import Jobs</a></strong></li></ul><h2><a href="#options-hash">Options Hash</a></h2><p>The options hash provides a way to pass configuration options directly to
the HTTParty library. It is also the method for specifying query parameters
to Rundeck, especially for creating or updating resources.</p><ul><li><strong><a href="#query-params">Query parameters</a></strong></li><li><strong><a href="#httparty-options">Pass options to HTTParty</a></strong></li></ul><hr><h2><a name="basic-examples">Basic Examples</a></h2><h3><a name="list-projects">List Projects</a></h3><small><a href="#top">Top</a></small><pre>projects = Rundeck.projects</pre><h4>Result</h4><pre>{ "count"=>"2",
  "project"=>
  [
    {
      "name"=>"anvils",
      "description"=>nil,
      "url"=>"http://192.168.50.2:4440/api/12/project/anvils"
    },
    {
      "name"=>"json_project",
      "description"=>nil,
      "url"=>"http://192.168.50.2:4440/api/12/project/json_project"
    }
  ]
}</pre>The above result consists of <code>Rundeck::ObjectifiedHash</code> objects that can be accessed with dot notation.
For example, to access the first project entry above, use <code>projects.project[0]</code> and similarly access the first project's name via <code>projects.project[0].name</code> <h3><a name="create-projects">Create a new project</a></h3><small><a href="#top">Top</a></small><h4>JSON (default format)</h4><pre>project = Rundeck.create_project('{ "name": "My_Project" }')</pre><h4>XML</h4><pre>project = Rundeck.create_project('&lt;project&gt;&lt;name&gt;My_Project&lt;/name&gt;&lt;/project&gt;', 'xml')</pre><h4>Result</h4><pre>{
  "name"=>"My_Project",
  "description"=>nil,
  "config"=> ...
}</pre><h3><a name="list-jobs">List Jobs</a></h3><small><a href="#top">Top</a></small><pre>jobs = Rundeck.jobs('anvils')</pre><h4>Result</h4><pre>{
  "count"=>"2",
  "job"=>
  {
    "name"=>"My Job 1",
    "group"=>nil,
    "project"=>"anvils",
    "description"=>nil,
    "id"=>"608564aa-7042-4a1b-b408-d55405a17cae"
  },
  {
    "name"=>"My Job 2",
    "group"=>nil,
    "project"=>"anvils",
    "description"=>nil,
    "id"=>"283948bb-9082-7a1c-g808-e57405a17eac"
  }
}</pre><h3><a name="list-job">List a specific job</a></h3><small><a href="#top">Top</a></small><pre>job = Rundeck.job('608564aa-7042-4a1b-b408-d55405a17cae')</pre><h4>Result</h4><pre>{
  "id"=>"608564aa-7042-4a1b-b408-d55405a17cae",
  "loglevel"=>"INFO",
  "sequence"=>
  {
    "command"=>
    {
      "exec"=>"echo 'Hello World'"
    },
    "keepgoing"=>"false",
    "strategy"=>"node-first"
  },
  "description"=>nil,
  "name"=>"My Job 1",
  "context"=>
  {
    "project"=>"anvils"
  },
  "uuid"=>"608564aa-7042-4a1b-b408-d55405a17cae"},</pre><h3><a name="import-jobs">Create/Import jobs</a></h3><small><a href="#top">Top</a></small><h4>YAML (default format)</h4><pre>job = Rundeck.import_jobs("
  - project: anvils
    name: My YAML Job
    description: Check the status of anvils
    loglevel: INFO
    sequence:
      keepgoing: true
      strategy: node-first
      commands:
      - exec: echo 'hello world'
")</pre><h4>XML</h4><pre>job = Rundeck.import_jobs("
  &lt;joblist&gt;
    &lt;job&gt;
      &lt;description&gt;Check the status of anvils&lt;/description&gt;
      &lt;name&gt;My XML Job&lt;/name&gt;
      &lt;loglevel&gt;INFO&lt;/loglevel&gt;
      &lt;sequence keepgoing='true' strategy='node-first'&gt;
        &lt;command&gt;
          &lt;exec&gt;echo 'hello world'&lt;/exec&gt;
        &lt;/command&gt;
      &lt;/sequence&gt;
      &lt;context&gt;
        &lt;project&gt;anvils&lt;/project&gt;
      &lt;/context&gt;
    &lt;/job&gt;
  &lt;/joblist&gt;
", "xml")</pre><h4>Result</h4>If multiple jobs are imported at the same time, the <code>job</code> object will be an array. Also, any failed imports will be inside a <code>failed</code> object just as successful imports are inside a <code>succeeded</code> object.<pre>{
  "succeeded"=>
  {
    "count"=>"1",
    "job"=>
    {
      "id"=>"1addde25-4112-47cd-9323-470d761347e4",
      "name"=>"My Job",
      "group"=>nil,
      "project"=>"anvils",
      "url"=>"http://192.168.50.2:4440/job/show/1addde25-4112-47cd-9323-470d761347e4",
      "index"=>"1",
      "href"=>"http://192.168.50.2:4440/api/12/job/1addde25-4112-47cd-9323-470d761347e4"
    }
  }
}</pre><h2><a name="options-hash">Options Hash</a></h2><small><a href="#top">Top</a></small><h3><a name="query-params">Query Parameters</a></h3><small><a href="#top">Top</a></small><p>There are not very many endpoints that require specifying parameters as
raw query parameters. More advanced endpoints like execution query and
running/executing a job may require query parameters.</p><h4>Running/Executing a job</h4>Some jobs require arguments as a way to set options on a job. In this case,
pass an argString query parameter where each argument is preceded with a
dash.<pre>execution = Rundeck.execute_job(
  'c07518ef-b697-4792-9a59-5b4f08855b67',
  query:
  {
    argString: '-repository ci -release SNAPSHOT -packages app-SNAPSHOT'
  }
)</pre><h4>Result</h4><pre>{
  "count"=>"1",
  "execution"=>
  {
    "user"=>"admin",
    "date_started"=>
    {
      "__content__"=>"2014-11-23T21:35:33Z",
      "unixtime"=>"1416778533638"
    },
    "job"=>
    {
      "name"=>"My Job 1",
      "group"=>nil,
      "project"=>"anvils",
      "description"=>nil,
      "id"=>"608564aa-7042-4a1b-b408-d55405a17cae",
      "averageduration"=>"2774"
    },
    "description"=>"echo 'Hello World'",
    "argstring"=>"-repository ci -release SNAPSHOT -packages app-SNAPSHOT",
    "id"=>"10",
    "href"=>"http://192.168.50.2:4440/execution/follow/10",
    "status"=>"running",
    "project"=>"anvils"
  }
}</pre><h3><a name="httparty-options">Pass options to HTTParty</a></h3><small><a href="#top">Top</a></small><p>You can pass any HTTParty option directly via the options hash. Two examples
include <code>ssl_ca_file</code> and <code>no_follow. See</code>  <a href="http://www.rubydoc.info/gems/httparty/HTTParty/ClassMethods" target="_blank">HTTParty Class Methods</a> for all options.
For example:</p><pre>project = Rundeck.project(
  'anvils',
  no_follow:   true,
  ssl_ca_file: '/etc/pki/tls/my_ca.crt'
)</pre><script type="text/javascript">(function (i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r;
  i[r] = i[r] || function () {
    (i[r].q = i[r].q || []).push(arguments)
  }, i[r].l = 1 * new Date();
  a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
  a.async = 1;
  a.src = g;
  m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-56963786-1', 'auto');
ga('send', 'pageview');</script></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script src="javascripts/all-da39a3ee.js" type="text/javascript"></script></body></html>